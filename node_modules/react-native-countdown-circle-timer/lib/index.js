var z=Object.create;var T=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var V=t=>T(t,"__esModule",{value:!0});var K=(t,e)=>{V(t);for(var o in e)T(t,o,{get:e[o],enumerable:!0})},Q=(t,e,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of O(e))!J.call(t,r)&&r!=="default"&&T(t,r,{get:()=>e[r],enumerable:!(o=N(e,r))||o.enumerable});return t},S=t=>Q(V(T(t!=null?z(H(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);K(exports,{CountdownCircleTimer:()=>W,useCountdown:()=>$});var b=S(require("react")),G=S(require("react-native")),R=S(require("react-native-svg"));var q=S(require("react"));var d=S(require("react")),B=S(require("react")),D=typeof window=="undefined"?B.useEffect:B.useLayoutEffect,E=({isPlaying:t,duration:e,startAt:o=0,updateInterval:r=0,onComplete:i,onUpdate:n})=>{let[s,m]=(0,d.useState)(o),l=(0,d.useRef)(0),p=(0,d.useRef)(o),f=(0,d.useRef)(o*-1e3),a=(0,d.useRef)(null),u=(0,d.useRef)(null),y=(0,d.useRef)(null),w=h=>{let c=h/1e3;if(u.current===null){u.current=c,a.current=requestAnimationFrame(w);return}let P=c-u.current,g=l.current+P;u.current=c,l.current=g;let x=p.current+(r===0?g:(g/r|0)*r),j=p.current+g,F=typeof e=="number"&&j>=e;m(F?e:x),F||(a.current=requestAnimationFrame(w))},C=()=>{a.current&&cancelAnimationFrame(a.current),y.current&&clearTimeout(y.current),u.current=null},k=(0,d.useCallback)(h=>{C(),l.current=0;let c=typeof h=="number"?h:o;p.current=c,m(c),t&&(a.current=requestAnimationFrame(w))},[t,o]);return D(()=>{if(n==null||n(s),e&&s>=e){f.current+=e*1e3;let{shouldRepeat:h=!1,delay:c=0,newStartAt:P}=(i==null?void 0:i(f.current/1e3))||{};h&&(y.current=setTimeout(()=>k(P),c*1e3))}},[s,e]),D(()=>(t&&(a.current=requestAnimationFrame(w)),C),[t,e,r]),{elapsedTime:s,reset:k}};var L=(t,e,o)=>{let r=t/2,i=e/2,n=r-i,s=2*n,m=o==="clockwise"?"1,0":"0,1",l=2*Math.PI*n;return{path:`m ${r},${i} a ${n},${n} 0 ${m} 0,${s} a ${n},${n} 0 ${m} 0,-${s}`,pathLength:l}},v=(t,e)=>t===0||t===e?0:typeof e=="number"?t-e:0,I=t=>({position:"relative",width:t,height:t}),A={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"};var M=(t,e,o,r)=>{if(r===0)return e;let i=t/r;return e+o*i},U=t=>{var e,o;return(o=(e=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(r,i,n,s)=>`#${i}${i}${n}${n}${s}${s}`).substring(1).match(/.{2}/g))==null?void 0:e.map(r=>parseInt(r,16)))!=null?o:[]},X=(t,e)=>{var f;let{colors:o,colorsTime:r,isSmoothColorTransition:i=!0}=t;if(typeof o=="string")return o;let n=(f=r==null?void 0:r.findIndex((a,u)=>a>=e&&e>=r[u+1]))!=null?f:-1;if(!r||n===-1)return o[0];if(!i)return o[n];let s=r[n]-e,m=r[n]-r[n+1],l=U(o[n]),p=U(o[n+1]);return`rgb(${l.map((a,u)=>M(s,a,p[u]-a,m)|0).join(",")})`},$=t=>{let{duration:e,initialRemainingTime:o,updateInterval:r,size:i=180,strokeWidth:n=12,trailStrokeWidth:s,isPlaying:m=!1,rotation:l="clockwise",onComplete:p,onUpdate:f}=t,a=(0,q.useRef)(),u=Math.max(n,s!=null?s:0),{path:y,pathLength:w}=L(i,u,l),{elapsedTime:C}=E({isPlaying:m,duration:e,startAt:v(e,o),updateInterval:r,onUpdate:typeof f=="function"?h=>{let c=Math.ceil(e-h);c!==a.current&&(a.current=c,f(c))}:void 0,onComplete:typeof p=="function"?h=>{var x;let{shouldRepeat:c,delay:P,newInitialRemainingTime:g}=(x=p(h))!=null?x:{};if(c)return{shouldRepeat:c,delay:P,newStartAt:v(e,g)}}:void 0}),k=e-C;return{elapsedTime:C,path:y,pathLength:w,remainingTime:Math.ceil(k),rotation:l,size:i,stroke:X(t,k),strokeDashoffset:M(C,0,w,e),strokeWidth:n}};var W=t=>{let{children:e,duration:o,strokeLinecap:r,trailColor:i,trailStrokeWidth:n}=t,{path:s,pathLength:m,stroke:l,strokeDashoffset:p,remainingTime:f,elapsedTime:a,size:u,strokeWidth:y}=$(t);return b.default.createElement(G.View,{style:I(u)},b.default.createElement(R.default,{viewBox:`0 0 ${u} ${u}`,width:u,height:u},b.default.createElement(R.Path,{d:s,fill:"none",stroke:i??"#d9d9d9",strokeWidth:n??y}),a!==o&&b.default.createElement(R.Path,{d:s,fill:"none",stroke:l,strokeLinecap:r??"round",strokeWidth:y,strokeDasharray:m,strokeDashoffset:p})),typeof e=="function"&&b.default.createElement(G.View,{style:A},e({remainingTime:f,elapsedTime:a,color:l})))};W.displayName="CountdownCircleTimer";
